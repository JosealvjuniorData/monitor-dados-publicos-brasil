# -*- coding: utf-8 -*-
"""
Created on Thu Feb 26 09:30:14 2026

@author: josej
"""

# .github/workflows/atualiza_catalogo.yml
name: Atualizador Autom치tico do Cat치logo

on:
  schedule:
    - cron: '0 3 * * 1' # Roda toda segunda-feira 맙 3h da manh칚
  workflow_dispatch: # Permite rodar manualmente com um bot칚o no GitHub

jobs:
  atualizar-json:
    runs-on: ubuntu-latest
    steps:
      - name: Baixar o c칩digo
        uses: actions/checkout@v3

      - name: Configurar Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Rodar script de atualiza칞칚o
        run: |
          pip install google-cloud-bigquery
          python script_atualiza_json.py # O rob칪 que ajusta os IDs
        
      - name: Fazer o Commit e Push (se houver mudan칞as)
        run: |
          git config --global user.name "Rob칪 de Dados"
          git config --global user.email "robo@seuprojeto.com"
          git commit -am "游뱄 Atualiza칞칚o autom치tica de IDs quebrados" || echo "Nenhuma mudan칞a necess치ria"
          git push